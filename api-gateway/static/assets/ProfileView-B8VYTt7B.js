import{l as w,m as V,n as h,H as x,v as A,w as e,r as t,o as S,a as s,d as l,y as E,u as i,f as p,B as k,E as _}from"./index-D3vS40h9.js";import{A as z}from"./AppLayout-DQjJjqFa.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"profile-container"},C={__name:"ProfileView",setup(P){const o=w(),u=V(null),r=h({fullName:""}),c={fullName:[{required:!0,message:"Введите ФИО",trigger:"blur"},{max:255,message:"Максимум 255 символов",trigger:"blur"}]};x(()=>{r.fullName=o.user?.full_name||""});const m=async()=>{u.value&&await u.value.validate(async d=>{if(d)try{await o.updateProfile(r.fullName),_.success("Профиль успешно обновлен")}catch{_.error(o.error||"Ошибка обновления профиля")}})};return(d,a)=>{const f=t("el-input"),n=t("el-form-item"),g=t("el-tag"),v=t("el-button"),b=t("el-form"),y=t("el-card");return S(),A(z,null,{default:e(()=>[s("div",M,[l(y,{class:"profile-card"},{header:e(()=>[...a[1]||(a[1]=[s("div",{class:"card-header"},[s("h2",null,"Профиль"),s("p",null,"Редактирование личной информации")],-1)])]),default:e(()=>[l(b,{ref_key:"formRef",ref:u,model:r,rules:c,"label-position":"top",onSubmit:E(m,["prevent"])},{default:e(()=>[l(n,{label:"Email"},{default:e(()=>[l(f,{"model-value":i(o).user?.email,disabled:"",size:"large"},null,8,["model-value"]),a[2]||(a[2]=s("div",{class:"form-hint"}," Email нельзя изменить ",-1))]),_:1}),l(n,{label:"ФИО",prop:"fullName"},{default:e(()=>[l(f,{modelValue:r.fullName,"onUpdate:modelValue":a[0]||(a[0]=N=>r.fullName=N),placeholder:"Введите ФИО",size:"large",maxlength:"255","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(n,{label:"Роль"},{default:e(()=>[l(g,{type:i(o).isAdmin?"danger":"info",size:"large"},{default:e(()=>[p(k(i(o).isAdmin?"ADMIN":"USER"),1)]),_:1},8,["type"])]),_:1}),l(n,null,{default:e(()=>[l(v,{type:"primary",size:"large",loading:i(o).loading,onClick:m},{default:e(()=>[...a[3]||(a[3]=[p(" Сохранить ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])]),_:1})}}},U=B(C,[["__scopeId","data-v-2f1f6bfe"]]);export{U as default};
